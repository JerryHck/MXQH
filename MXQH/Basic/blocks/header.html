      <!-- navbar header -->
<div class="navbar-header {{vm.app.settings.navbarHeaderColor}} text-center">
    <button class="pull-right visible-xs" ui-toggle-class="off-screen" data-target=".app-aside" ui-scroll="app">
        <i class="glyphicon glyphicon-align-justify"></i>
    </button>
    <!-- brand -->
    
    <a href="#/" class="navbar-brand text-lt pull-left">
        <!--<img src="Content/images/logo4.png?v=933cda438e" alt=".">-->
        <i class="glyphicon glyphicon-home"></i>
        <span class="hidden-folded m-l-n-sm hidden-xs"><img style="max-width:150px" src="Content/images/logo4.png?v=933cda438e" alt="."></span>
        <!--<span class="hidden-folded m-l-xs" style="width:65%">{{vm.app.name}}</span>-->
    </a>
    <a class="navbar-brand text-lt visible-xs" ui-toggle-class="show" data-target=".navbar-collapse">
        {{ vm.SelectedSys.SysName }}
    </a>
</div>
<!-- / navbar header -->
<!-- navbar collapse -->
<div class="collapse pos-rlt navbar-collapse box-shadow {{vm.app.settings.navbarCollapseColor}}" >
    <!-- buttons -->
    <div class="nav navbar-nav hidden-xs">
        <a href class="btn no-shadow navbar-btn" ng-click="vm.app.settings.asideFolded = !vm.app.settings.asideFolded">
            <i class="fa {{vm.app.settings.asideFolded ? 'fa-indent' : 'fa-dedent'}} fa-fw"></i>
        </a>
        <!--<pre>{{ vm.app.settings | json }}</pre>-->
    </div>
    
    <!-- / buttons -->
    <ul class="nav navbar-nav">
        <li class="dropdown" dropdown>
            <a class="dropdown-toggle" data-toggle="dropdown">
                <!--<i class="fa fa-fw fa-plus visible-xs-inline-block"></i>-->
                <span>{{ vm.SelectedSys.SysName }}</span> <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
                <li ng-repeat="item in vm.SysList"><a ng-click="vm.ChangeSys(item)">{{ item.SysName }}</a></li>
            </ul>
        </li>
        <li class="dropdown pos-stc hidden-xs" dropdown>
            <a href class="dropdown-toggle" data-toggle="dropdown">
                <span>所有功能</span>
                <span class="caret"></span>
            </a>
            <div class="dropdown-menu wrapper w-full bg-white">
                <div class="wrapper-xs">
                    <div class="form-inline">
                        <div class="form-group">
                            <label class="control-label text-primary-lter">最近浏览:</label>
                        </div>
                        <div class="form-group" ng-repeat="b in vm.BrowseList">
                            <label class="control-label col-md-12">
                                <!--<a ui-sref="{{ b.RouteName }}">-->
                                <a ng-click="vm.Go(b)">
                                    <span class="text-xs">{{ b.FunName }}</span>
                                </a>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="w-100">
                    <div style="width:170px; vertical-align:top; float:left">
                        <div class="panel panel-info">
                            <div class="panel-heading text-center">系统列表</div>
                            <div class="panel-body padder-xxs padder-v-xxs">
                                <div class="list-group">
                                    <a ng-repeat="sys in vm.SysList" class="list-group-item padder-xs hover-anchor cl"
                                       ng-class="{'hover': sys.SysNo == vm.SelSys.SysNo, ' b-l-info':$index%2==0, 'b-l-primary':$index%2==1}"
                                       ng-mouseover="vm.SelSys = sys">
                                        {{ sys.SysName }}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="vertical-align:top;float:right;width:calc(100% - 170px);" class="scroll-x">
                        <div class="panel panel-info">
                            <div class="panel-heading text-center">功能列表</div>
                            <div class="panel-body padder-xxs padder-v-xxs">
                                <div class="no-padder scroll-x">
                                    <table style="width:{{ vm.SelSys.FunTree.length * 200 }}px">
                                        <tr>
                                            <td class="text-info padder-xxs" style="width:200px; vertical-align: top" ng-repeat="root in vm.SelSys.FunTree">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading text-center h4">
                                                        <span class="auto text-primary-dker h5 text-success">
                                                            <span><i ng-class="root.FunImge"></i></span>
                                                            <span class="font-bold ml-1">{{ root.FunName }}</span>
                                                        </span>
                                                    </div>
                                                    <div class="panel-body padder-v-xxs padder-xs scroll-y bar-xs" style="height:600px">
                                                        <ul class="list-unstyled l-h-2x m-l-md">
                                                            <li ng-repeat="fun in root.FunList">
                                                                <a ui-sref="{{ fun.RouteName }}">
                                                                    <span><i ng-class="fun.FunImge"></i></span>
                                                                    <span class="text-xs">{{ fun.FunName }}</span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>

                                    <div style="width:200px;float:left" ng-repeat="root in vm.SelSys.FunTree">
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--<table style="width:{{ vm.SysList.length * 200 }}px">
                        <tr>
                            <td class="text-info padder-xxs" style="width:200px; vertical-align: top"  ng-repeat="sys in vm.SysList">
                                <div class="panel panel-default">
                                    <div class="panel-heading text-center h4">{{ sys.SysName }}</div>
                                    <div class="panel-body padder-v-xxs padder-xs scroll-y bar-xs" style="max-height:600px">
                                        <ul class="nav">
                                            <li ng-repeat="root in sys.FunTree">
                                                <span class="auto text-primary-dker h5 text-success">
                                                    <span><i ng-class="root.FunImge"></i></span>
                                                    <span class="font-bold ml-1">{{ root.FunName }}</span>
                                                </span>
                                                <ul class="list-unstyled l-h-2x m-l-md">
                                                    <li ng-repeat="fun in root.FunList">
                                                        <a ui-sref="{{ fun.RouteName }}">
                                                            <span><i ng-class="fun.FunImge"></i></span>
                                                            <span class="text-xs">{{ fun.FunName }}</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>-->
                </div>
            </div>
        </li>
        <li class="dropdown hidden-xs" dropdown>
            <a class="dropdown-toggle" data-toggle="dropdown">
                <span>表单流程</span>
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
                <li><a ng-click="vm.OpFlow('app.flowAdd')">新建表单</a></li>
            </ul>
        </li>
    </ul>
    <!-- search form -->
    <form class="navbar-form navbar-form-sm navbar-left shift hidden-xs" ui-shift="prependTo" target=".navbar-collapse" role="search">
        <div class="form-group">
            <input autocomplete="off"  type="text" ng-model="vm.SelectedFun" uib-typeahead="fun as fun.FunName for fun in vm.FunctionList | filter:$viewValue | limitTo:8"
                   class="form-control input-sm bg-light no-border rounded padder" placeholder="查找功能..." ng-keypress="vm.Go(vm.SelectedFun)">
        </div>
    </form>
    <!-- nabar right -->
    <ul class="nav navbar-nav navbar-right" id="dpMenus">
        <li class="hidden-xs">
            <a class="h6 text-info-dker pull-down pull-right-xs">{{ vm.SysTime }}</a>
        </li>
        <li class="hidden-xs">
            <a class="text-success h4" stop-propagation ng-click="vm.Reflash()"><i class="glyphicon glyphicon-refresh"></i></a>
        </li>
        <li class="hidden-xs">
            <a ui-fullscreen></a>
        </li>
        <li class="dropdown" dropdown>
            <a href id="noteID" class="dropdown-toggle" data-toggle="dropdown">
                <i class="icon-bell fa-fw"></i>
                <span class="visible-xs-inline">通知栏</span>
                <span class="badge badge-sm up bg-danger pull-right-xs" ng-if="vm.NewNoteCount>0">{{ vm.NewNoteCount }}</span>
            </a>
            <!-- dropdown -->
            <div class="dropdown-menu w-xxl animated fadeInUp">
                <div class="panel bg-white">
                    <div class="panel-heading b-light text-center">
                        <strong>你有 <span>{{ vm.NewNoteCount }}</span>笔未读通知</strong>
                        <a class="pull-left" stop-propagation title="全部读" ng-click="vm.ReadAllNote()">
                            <span class="font-v3 h4"><i class="icon icon-envelope"></i></span>
                        </a>
                    </div>
                    <div class="list-group scroll-y bar-xs" id="nodeDiv" style="max-height:600px">
                        <a class="list-group-item clearfix" stop-propagation ng-repeat="item in vm.NoteList" ng-click="vm.ReadNote(item)">
                            <span class="pull-left h4 m-r-sm">
                                <span class="text-danger" ng-if="!item.IsRead">
                                    <i class="icon icon-envelope"></i>
                                </span>
                                <span class="text-muted" ng-if="item.IsRead">
                                    <i class="icon icon-envelope-open"></i>
                                </span>
                            </span>
                            <span class="clear">
                                [<span class="h5 text-info">{{ item.NoteTime }}]</span>{{ item.NoteType }}
                                <br>
                                <small class="font-v3" ng-class="{'text-muted': item.IsRead}">{{ item.Note }}</small>
                            </span>
                        </a>
                    </div>
                    <!--<div class="panel-footer text-sm">
                        <a class="pull-right"><i class="fa fa-cog"></i></a>
                        <a data-toggle="class:show animated fadeInRight">查看所有通知</a>
                    </div>-->
                </div>
            </div>
            <!-- / dropdown -->
        </li>
        <li class="dropdown" dropdown>
            <a class="dropdown-toggle clear" data-toggle="dropdown">
                <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">
                    <img src="img/a0.jpg" alt="...">
                    <i class="on md b-white bottom"></i>
                </span>
                <span class="hidden-sm hidden-md">{{ User.ChiLastName }}{{ User.ChiFirstName }}</span> <b class="caret"></b>
            </a>

            <!-- dropdown -->
            <ul class="dropdown-menu animated fadeInRight w">
                <li>
                    <a><span ui-toggle-class="active" target=".tool">工具下载</span></a>
                </li>
                <li>
                    <a><span ui-toggle-class="active" target=".fram">调整布局</span></a>
                </li>
                <li>
                    <a ng-click="vm.ChangPsw()">修改密码</a>
                </li>
                <li class="divider"></li>
                <li>
                    <a ng-click="vm.LogOff()">注销</a>
                </li>
            </ul>
            <!-- / dropdown -->
        </li>
    </ul>
    <!-- / navbar right -->
    <!--<script>
        $("div.dropdown-menu").on("click", "[data-stopPropagation]", function (e) {
            e.stopPropagation();
        });
        $(".stopPropagation").on("click", function (e) {
            e.stopPropagation();
        })
    </script>-->
</div>