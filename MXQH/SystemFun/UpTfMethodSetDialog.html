
<uib-tabset active="active" type="tabs" class="h-100">
    <uib-tab index="0">
        <uib-tab-heading class="h5">传输方法设定窗口</uib-tab-heading>
        <div class="panel panel-default">
            <div class="panel-body padder-xs padder-v-xxs">
                <div class="wrapper-xs">
                    <div class="form-inline">
                        <button class="btn btn-sm btn-success " ng-click="up.Insert() "><i class="glyphicon glyphicon-plus "></i>新增</button>
                        <div class="form-group">
                            <input autocomplete="off" type="text" class="form-control" ng-model="up.Ser.aName" placeholder="方法名称">
                        </div>
                        <button class="btn btn-sm btn-info " ng-click="up.Search() "><i class="glyphicon glyphicon-search "></i>查询</button>
                        <button class="btn btn-sm btn-warning pull-right" type="button" ng-click="up.Cancel()">取消</button>
                    </div>
                </div>
                <div class="padder-xs ">
                    <div class="col-md-12 scroll-x no-padder" style="min-height:450px">
                        <table class="table pad-xs">
                            <thead>
                                <tr>
                                    <td style="width:60px">操作</td>
                                    <td style="width:100px ">所属账号</td>
                                    <td style="width:160px ">执行方法(多个时,隔开)</td>
                                    <td style="width:80px ">运行频率(毫秒) 0时不运行</td>
                                    <td style="width:80px ">无值休眠(毫秒)--0 时默认休眠5分钟</td>
                                    <td style="width:160px ">方法说明</td>
                                </tr>
                            </thead>
                            <tr ng-if="up.IsInsert" ng-form="up.InsertForm">
                                <td>
                                    <button class="btn btn-xs btn-success" ng-disabled="up.InsertForm.$invalid" ng-click="up.SaveInsert()"><i class="glyphicon glyphicon-save"></i></button>
                                    <button class="btn btn-xs btn-warning" ng-click="up.IsInsert=false"><i class="fa fa-undo"></i></button>
                                </td>
                                <td>{{ up.NewItem.UserNo }}</td>
                                <td>
                                    <div ng-class="{ 'has-error': up.InsertForm.Name.$invalid }">
                                        <div config-select tb="UpTfMethodSet" select-item="up.selectItem" col="MethodName" ng-name="Name" placeholder="执行方法" ng-model="up.NewItem.Name" ng-required="true" ng-change="up.ChangeName()"></div>
                                    </div>
                                </td>
                                <td>
                                    <div ng-class="{ 'has-error': up.InsertForm.Rate.$invalid }">
                                        <input autocomplete="off" type="number" min="0"  name="Rate" class="form-control" placeholder="运行频率(毫秒) 0时不运行" ng-model="up.NewItem.Rate" required />
                                    </div>
                                </td>
                                <td>
                                    <div ng-class="{ 'has-error': up.InsertForm.Sleep.$invalid }">
                                        <input autocomplete="off" type="number" min="0"  name="Sleep" class="form-control" placeholder="无值休眠(毫秒)--0 时默认休眠5分钟" ng-model="up.NewItem.Sleep" required />
                                    </div>
                                </td>
                                <td>
                                    <div ng-class="{ 'has-error': up.InsertForm.Text.$invalid }">
                                        <input autocomplete="off" type="text" name="Text" class="form-control" placeholder="方法说明" ng-model="up.NewItem.Text" required />
                                    </div>
                                </td>
                            </tr>
                            <tr ng-repeat="item in up.List " ng-form="item.ItemForm">
                                <td>
                                    <span ng-if="!item.IsEdit">
                                        <button class="btn btn-xs btn-primary" ng-click="up.Edit(item)"><i class="glyphicon glyphicon-edit"></i></button>
                                        <button class="btn btn-xs btn-danger" ng-confirm="{text:'确定要删除吗'}" ng-click="up.Delete(item)"><i class="glyphicon glyphicon-remove"></i></button>
                                    </span>
                                    <span ng-if="item.IsEdit">
                                        <button class="btn btn-xs btn-success" ng-disabled="item.ItemForm.$invalid" ng-click="up.SaveEdit($index)"><i class="glyphicon glyphicon-save"></i></button>
                                        <button class="btn btn-xs btn-warning" ng-click="item.IsEdit=false"><i class="fa fa-undo"></i></button>
                                    </span>
                                </td>
                                <td title="{{ item.UserNo }}">{{ item.UserNo }}</td>
                                <td>
                                    {{ item.Name }}
                                </td>
                                <td>
                                    <span ng-if="!item.IsEdit">{{ item.Rate }}</span>
                                    <div ng-if="item.IsEdit" ng-class="{ 'has-error' : item.ItemForm.item_Rate.$invalid }">
                                        <input autocomplete="off" type="number" min="0"  name="item_Rate" class="form-control" placeholder="运行频率(毫秒) 0时不运行" ng-model="up.EditItem.Rate" required />
                                    </div>

                                </td>
                                <td>
                                    <span ng-if="!item.IsEdit">{{ item.Sleep }}</span>
                                    <div ng-if="item.IsEdit" ng-class="{ 'has-error' : item.ItemForm.item_Sleep.$invalid }">
                                        <input autocomplete="off" type="number" min="0" name="item_Sleep" class="form-control" placeholder="无值休眠(毫秒)--0 时默认休眠5分钟" ng-model="up.EditItem.Sleep" required />
                                    </div>

                                </td>
                                <td>
                                    <span ng-if="!item.IsEdit">{{ item.Text }}</span>
                                    <div ng-if="item.IsEdit" ng-class="{ 'has-error' : item.ItemForm.item_Text.$invalid }">
                                        <input autocomplete="off" type="text" name="item_Text" class="form-control" placeholder="方法说明" ng-model="up.EditItem.Text" required />
                                    </div>

                                </td>
                            </tr>
                        </table>
                        <!--<pre>{{ up.selectItem | json }}</pre>-->
                    </div>
                    <div class="col-md-12 text-center " ng-if="up.page.total>up.page.size ">
                        <div uib-pagination total-items="up.page.total " ng-model="up.page.index " items-per-page="up.page.size " max-size="10 " first-text="第一页 " previous-text="上一页 "
                             ng-change="up.PageChange() " next-text="下一页 " last-text="最后页 " boundary-links="true " boundary-link-numbers="true "></div>
                    </div>
                </div>
            </div>
        </div>
    </uib-tab>
</uib-tabset>
