<uib-tabset active="active" type="tabs" class="h-100" cg-busy="crc.promise">
    <uib-tab index="0">
        <uib-tab-heading class="h5">完工情况报表</uib-tab-heading>
        <div class="wrapper-md" ng-form="DialogForm">
            <div class="form-inline">
                <div class="form-group" ng-class="{'has-error':DialogForm.WorkOrder.$invalid }">
                    <input autocomplete="off"  type="text" class="form-control" name="WorkOrder" ng-model="crc.Ser.WorkOrder" placeholder="工单号" required>
                </div>
                <!--<div class="form-group">
                    <div class="input-group">
                        <input autocomplete="off"  type="text" date-picker class="form-control" ng-model="crc.Ser.CompleteDate" placeholder="完工日期" option="vm.DateTimeOption">
                        <span class="input-group-addon">
                            <a ng-click="crc.Ser.CompleteDate=undefined" class="text-danger"><i class="glyphicon glyphicon-trash"></i></a>
                        </span>
                    </div>
                </div>-->
                <button ng-disabled="DialogForm.$invalid" class="btn btn-sm btn-info " ng-click="crc.Search() "><i class="glyphicon glyphicon-search "></i>查询</button>
                <!--<button class="btn btn-sm btn-success " ng-click="crc.ExportExcel() "><i class="glyphicon glyphicon-export "></i> 导出</button>-->
            </div>
        </div>
        <div class="col-sm-8">
            <div class="panel panel-default scroll-y" style="max-height:600px">
                <div class="panel-heading font-bold text-center">
                    工单 <span class="h4 font-bold text-info">{{ crc.Detail.WorkOrder }}</span>完工信息
                </div>
                <div class="panel-body h5">
                    <div class="form-horizontal" ng-show="crc.Detail">
                        <div class="form-group">
                            <label class="control-label col-sm-2">工单号：</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold  h4 text-success">{{crc.Detail.WorkOrder}}</p>
                            </div>
                            <label class="control-label col-sm-2">工单数量:</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold  h4 text-success">{{crc.Detail.Quantity}}</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">产品编号:</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold">{{crc.Detail.MaterialCode}}</p>
                            </div>
                            <label class="control-label col-sm-2">完工数量:</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold h4 text-success">{{crc.Detail.CompleteQty}}</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">产品名称:</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold">{{crc.Detail.MaterialName}}</p>
                            </div>

                            <label class="control-label col-sm-2">投入数量:</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold text-success">{{crc.Detail.OnLineQty}}</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">U9实际入库数:</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold text-danger">{{crc.ActualRcvQty}}</p>
                            </div>
                            <label class="control-label col-sm-2">U9开工数:</label>
                            <div class="col-sm-4">
                                <p class="form-control-static font-bold text-danger">{{crc.TotalStartQty}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!--<pre>{{ crc.Detail | json }}</pre>-->
            </div>
          
            <div class="panel panel-default scroll-y" style="max-height:600px">
                <div class="panel-heading font-bold text-center">
                    工单 <span class="h4 font-bold text-info">{{ crc.Detail.WorkOrder }}</span><span class="text-danger">U9完工报告列表</span>
                    <a ng-click="crc.IsShowCompleteList=!crc.IsShowCompleteList" class="pull-right"><span class="text-primary glyphicon glyphicon-chevron-up"></span></a>
                </div>
                <table class="table" ng-show="!crc.IsShowCompleteList">
                    <thead>
                        <tr>
                            <td>完工报告单号</td>
                            <td>完工数量</td>
                            <td>单据状态</td>
                            <td>完工时间</td>
                            <td>审核日期</td>
                        </tr>
                    </thead>
                    <tr ng-repeat="item in crc.CompleteList">
                        <td title="{{ item.DocNo }}">{{ item.DocNo }}</td>
                        <td title="{{ item.CompleteQty }}">{{ item.CompleteQty }}</td>
                        <td ng-if="item.DocState==0">开立</td>
                        <td ng-if="item.DocState==1">已核准</td>
                        <td ng-if="item.DocState==2">已质检</td>
                        <td ng-if="item.DocState==3">关闭</td>
                        <td ng-if="item.DocState==4">核准中</td>
                        <td title="{{ item.CompleteDate }}">{{ item.CompleteDate|date:'yyyy-MM-dd HH:mm:ss' }}</td>
                        <td title="{{ item.ApproveOn }}">{{ item.ApproveOn|date:'yyyy-MM-dd HH:mm:ss' }}</td>
                    </tr>
                </table>
            </div>
            <div class="panel panel-default scroll-y" style="max-height:600px">
                <div class="panel-heading font-bold text-center">
                    工单 <span class="h4 font-bold text-info">{{ crc.Detail.WorkOrder }}</span><span class="text-danger">U9开返工列表</span>
                    <a ng-click="crc.IsShowStartInfo=!crc.IsShowStartInfo" class="pull-right"><span class="text-primary glyphicon glyphicon-chevron-up"></span></a>
                </div>
                <table class="table" ng-show="!crc.IsShowStartInfo">
                    <thead>
                        <tr>
                            <td>时间</td>
                            <td>开工人</td>
                            <td>实际开工/返工数量</td>
                            <td>开工/返工数量</td>
                            <td>累计开工数量</td>
                            <td>类型</td>
                            <td>序号</td>
                        </tr>
                    </thead>
                    <tr ng-repeat="item in crc.StartInfoList">
                        <td title="{{ item.CreatedOn }}">{{ item.CreatedOn|date:'yyyy-MM-dd HH:mm:ss' }}</td>
                        <td title="{{ item.CreatedBy }}">{{ item.CreatedBy }}</td>
                        <td title="{{ item.ActualStartQty }}">{{ item.ActualStartQty }}</td>
                        <td title="{{ item.StartQty }}">{{ item.StartQty }}</td>
                        <td title="{{ item.TotalStartQty }}">{{ item.TotalStartQty }}</td>
                        <td ng-if="item.BusinessDirection==0">开工</td>
                        <td ng-if="item.BusinessDirection==1">反开工</td>
                        <td title="{{ item.StartSeq }}">{{ item.StartSeq }}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="padder-md col-sm-4">
            <div class="panel panel-default scroll-y" style="max-height:600px">
                <div class="panel-heading font-bold text-center">
                    未完工明细
                </div>
                <table class="table">
                    <thead>
                        <tr>
                            <td  >内控码</td>
                            <td  >是否报废</td>
                        </tr>
                    </thead>
                    <tr ng-repeat="item in crc.List">
                        <td  title="{{ item.InternalCode }}">{{ item.InternalCode }}</td>
                        <td ng-if="item.IsDump=='是'" title="{{ item.IsDump }}"><span class="text-danger" >{{ item.IsDump }}</span></td>
                        <td ng-if="item.IsDump!='是'"  title="否"><span class="text-success">否</span></td>
                    </tr>
                </table>
                <!--<div class="col-md-12 text-center " ng-if="crc.Ser.total>crc.Ser.pageSize ">
                    <div uib-pagination total-items="crc.Ser.total " ng-model="crc.Ser.pageIndex " items-per-page="crc.Ser.pageSize " max-size="10 " first-text="第一页 " previous-text="上一页 "
                         ng-change="crc.PageChange() " next-text="下一页 " last-text="最后页 " boundary-links="true " boundary-link-numbers="true "></div>
                </div>-->
                <div class="col-md-12 text-center " ng-if="crc.Ser.total>crc.Ser.pageSize ">
                    <div uib-pagination total-items="crc.Ser.total " ng-model="crc.Ser.pageIndex " items-per-page="crc.Ser.pageSize " max-size="10 " first-text="" previous-text="上一页 "
                         ng-change="crc.PageChange() " next-text="下一页 " last-text="" boundary-links="false" direction-links="false" boundary-link-numbers="true"></div>
                </div>
            </div>

        </div>
    </uib-tab>
</uib-tabset>
