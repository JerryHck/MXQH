<div class="wrapper-xs">
    <div class="col-xs-5 padder-xs">
        <div class="panel panel-default" ng-form="wo.OrderForm">
            <div class="panel-heading font-bold text-center">工单装配</div>
            <div class="panel-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label class="col-xs-3 control-label">所属工单</label>
                        <div class="col-xs-8 form-control-static"><span class="text-info font-bold">{{ wo.OrderData.WorkOrder }} </span> </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">工艺流程</label>
                        <div class="col-xs-8 form-control-static"><span class="text-info font-bold">{{ wo.ProcedureItem.RouteName }} </span> </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">当前工序</label>
                        <div class="col-xs-8" ng-class="{ 'has-error' : wo.OrderForm.router.$invalid }">
                            <ui-select name="router" ng-model="wo.ProcedureItem" theme="bootstrap" search-enabled="true" ng-required="true" ng-change="wo.ChangePro(wo.ProcedureItem)">
                                <ui-select-match placeholder="选择工序..." class="h6">{{ $select.selected.ProcedureName }}</ui-select-match>
                                <ui-select-choices repeat="item in wo.ProcedureList | filter: $select.search track by item.boProcedureID">
                                    <div ng-bind-html="item.ProcedureName | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">内控码</label>
                        <div class="col-xs-8" ng-class="{ 'has-error' : wo.OrderForm.InCode.$invalid }">
                            <input autocomplete="off"  type="text" class="form-control"
                                   ui-focus="wo.Focus.InCode" name="InCode" ng-model="wo.Item.InCode" placeholder="生产条码" ng-keyup="wo.KeyDonwInCode($event)" required>
                            <div class="h6 text-danger">扫描内控码装配</div>
                        </div>
                    </div>
                    <div class="form-group hide">
                        <div class="col-xs-offset-3 col-xs-9">
                            <div class="checkbox col-md-5">
                                <label class="i-checks">
                                    <input autocomplete="off"  type="checkbox" ng-model="wo.IsAuto"><i></i> 自动合格
                                </label>
                            </div>
                            <div class="col-md-7">
                                <span><button type="submit" class="btn btn-success" style="width:80px" ng-click="wo.InCodeToDb()" ng-disabled="wo.OrderForm.$invalid || wo.IsAuto || !wo.InCodeControl">合格</button></span>
                                <span class="pl-md-1">
                                    <button id="NgSave" type="submit" ng-hide="true" class="btn btn-sm btn-success" ng-click="wo.NgSave()" ng-disabled="wo.OrderForm.$invalid || wo.IsAuto|| !wo.InCodeControl">不良</button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="line line-dashed b-b line-lg pull-in m-t-lg"></div>
                    <div class="form-group m-t-lg">
                        <label class="col-xs-3 control-label h4 text-danger font-bold">不良录入</label>
                        <div class="col-xs-8 has-error">
                            <input autocomplete="off"  type="text" class="form-control" ng-model="wo.Item.NgInCode" placeholder="不良条码" ng-keyup="wo.KeyDonwInCodeNg($event)">
                            <div class="h6 text-danger">扫描不良内控码录入不良</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-danger scroll-y" style="max-height:350px"  ng-show="wo.CalData">
            <!--<div class="panel-heading font-bold text-center">信息显示</div>-->
            <div class="panel-body">
                <div class="form-horizontal">
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">上站过站数:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.LagProOKSum}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">本站过站数:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.ProOKSum}}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12 h2 text-danger">
                        <label class="control-label col-xs-6 padder-xs">本站留存数:</label>
                        <div class="col-xs-6">
                            <p class="form-control-static font-bold">{{ wo.CalData.NotDoneNum }}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12 h1 text-warning">
                        <label class="control-label col-xs-offset-2 padder-xs">请注意把握速度！</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-7 padder-xxs" ng-form="wo.UpdateForm">
        <div class="panel panel-default scroll-y" style="max-height:600px">
            <div class="panel-heading font-bold text-center">
                工单 <span class="h4 font-bold text-info">{{ wo.OrderData.WorkOrder }}</span>信息
            </div>
            <div class="panel-body h5 padder-xxs">
                <div class="form-horizontal" ng-show="wo.OrderData">
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">产品编号:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold">{{wo.OrderData.MaterialCode}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">产品名称:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold">{{wo.OrderData.MaterialName}}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">计划日期:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold">{{wo.OrderData.AssemblyDate}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">产线名称:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold">{{wo.OrderData.AssemblyLineName}}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">出货地:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold">{{wo.OrderData.SendPlaceName}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">ERP销售单:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold">{{wo.OrderData.ERPSO}}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">工单数量:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold h4 text-success">{{wo.OrderData.Quantity}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">ERP订单数:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold">{{wo.OrderData.ERPQuantity}}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">总合格数:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.ProOKSum}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">总不良数:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.ProNgSum}}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">今日合格:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.TodayOKSum}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">今日不良:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.TodayNgSum}}</p>
                        </div>
                    </div>
                    <div class="form-group-xs col-md-12">
                        <label class="control-label col-xs-2 padder-xs">总维修数:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.ProRepairSum}}</p>
                        </div>
                        <label class="control-label col-xs-2 padder-xs">今日维修:</label>
                        <div class="col-xs-4">
                            <p class="form-control-static font-bold  h4 text-success">{{wo.CalData.TodayRepairSum}}</p>
                        </div>
                    </div>
                    <div class="line line-dashed b-b line-lg pull-in m-t-lg"></div>
                    <div class="form-group-xs col-md-12" ng-if="wo.ProStep.now">
                        <label class="control-label col-xs-2 padder-xs"><span class="text-success">{{ wo.ProStep.BSN }}</span> 过站:</label>
                        <div class="col-xs-10 h6">
                            <div ng-step opts="wo.ProStep"></div><br />
                            <span style="color:rgb(207, 205, 205)"><i class="fa fa-circle"></i></span>-未过站
                            <span style="color:rgb(129, 165, 86)"><i class="fa fa-circle"></i></span>-已过站
                            <span style="color:rgb(234, 65, 19)"><i class="fa fa-circle"></i></span>-不良
                        </div>
                    </div>
                </div>
            </div>
            <!--<pre>{{ wo.CalData | json }}</pre>-->

        </div>
    </div>
    <div class="panel panel-default scroll-y" style="max-height:350px">
        <div class="panel-heading font-bold text-center">信息显示</div>
        <div class="panel-body">
            <div class="list-group">
                <ul class="list-group bg-white">
                    <li class="list-group-item" ng-repeat="item in wo.MesList track by item.Id" ng-class="{ 'text-danger' : !item.IsOk, 'text-success':item.IsOk }">
                        <span herf class="pull-left">
                            <i class="glyphicon" ng-class="{ 'glyphicon-remove' : !item.IsOk, 'glyphicon-ok':item.IsOk }"></i>
                        </span>
                        <div class="clear">
                            <div>{{ item.Msg }}</div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="bsn-ng dialog dialog-full">
    <div class="padder-xs scroll-y">
        <div class="panel panel-info">
            <div class="panel-heading h3 text-center">
                <span class="font-bold text-danger h2">{{ wo.NgItem.InCode }}</span>组装不良采集
                <button style="width:200px" ui-remove-class="active" target=".bsn-ng" class="btn btn-lg btn-warning h1 pull-left m-t-n-xs" type="button" ng-click="wo.cancel()">关闭</button>
            </div>
            <div class="panel-body wrapper-xs padder-v-xxs" ng-form="QcForm">
                <div class="col-md-12 no-padder">
                    <div class="panel panel-default">
                        <div class="panel-body scroll-y padder-xs padder-v-xs" style="max-height:600px">
                            <div class="col-md-4 col-xs-4 col-xs-4 m-t-md padder-lg" ng-repeat="item in wo.TypeList">
                                <button style="height:90px" class="btn-group-vertical h2 btn-lg w-full btn-primary"
                                        ng-click="wo.DialogItem.NgType=item.ID; wo.ChangeMonitor()"
                                        ng-class="{'btn-outline-primary':$index%2==0, 'btn-outline-success':$index%2==1, 'btn-success':wo.DialogItem.NgType==item.ID}">
                                    <span class="h1">{{ item.Name }}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 text-center">
                </div><br />
            </div>
        </div>
    </div>
</div>

